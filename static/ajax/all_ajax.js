$("#creat_post").off("submit").on("submit",function(t){t.preventDefault();var e,o=$("#community");e=o.length>0?$(o).attr("data-key"):"none";var n=$("#post").val(),a=$("#id_image")[0].files[0],i='<p dir="auto">'+n.replace(/\n/g,"</p>\n<p dir='auto' >")+"</p>",c=new FormData;c.append("content",i),c.append("csrfmiddlewaretoken",$("input[name='csrfmiddlewaretoken']").val()),c.append("image",a),c.append("community",e),""!==n&&" "!==n?$.ajax({url:$creat_post,type:"POST",cache:!1,contentType:!1,processData:!1,data:c,success:function(t,e,o){$("#post").val(null),$("#ss").attr("src",""),$("#ss").hide(),$("#post").css("height","unset");var n=$.parseHTML(t);$("#time-line").prepend(n),$audio.play()},error:function(t,e,o){}}):alert("Plz write post")}),$(document).bind("DOMSubtreeModified",function(){$(".post-options").off("click").on("click",function(t){t.preventDefault();var e=$(t.target)[0];$(e).is(".icofont-toggle-off")?($(e).removeClass("icofont-toggle-off"),$(e).addClass("icofont-toggle-on"),$(e).css("color","#007bff")):($(e).removeClass("icofont-toggle-on"),$(e).addClass("icofont-toggle-off"),$(e).css("color","unset"))})}),$(document).bind("DOMSubtreeModified",function(){$(".remove-post").off("click").on("click",function(t){t.preventDefault();var e=$(t.target)[0];$.ajax({url:$remove_post,type:"Post",cache:!1,data:{post:$(e).attr("data-key"),csrfmiddlewaretoken:$("input[name='csrfmiddlewaretoken']").val()},success:function(t,o,n){var a=$(e).parents(".post");$(a).replaceWith('<div style="width: 500px" class="m-auto alert alert-success" ><p>The Post is Removed</p></div>')},error:function(t,e,o){console.log(e)}})})}),$(window).on("click",function(){var t=$(".post-options");$(t).is(".icofont-toggle-on")&&($(t).removeClass("icofont-toggle-on"),$(t).addClass("icofont-toggle-off"),$(t).css("color","unset"))}),$(document).bind("DOMSubtreeModified",function(){autosize_textarea(),$(".comment-btn").off("click").on("click",function(t){t.preventDefault();var e=t.target,o=$(e).parents(".post-body");$.ajax({url:$get_comments,type:"GET",cache:!1,data:{post:$(o).attr("data-key")},success:function(t,e,n){$(o).find("#comments").length>0?$(o).find("#comments").remove():o.append(t)},error:function(t,e,o){}})})}),$(document).bind("DOMSubtreeModified",function(){$(".remove-comment").off("click").on("click",function(t){t.preventDefault();var e=$(t.target)[0];$.ajax({url:$remove_comment,type:"Post",cache:!1,data:{comment:$(e).attr("data-key"),csrfmiddlewaretoken:$("input[name='csrfmiddlewaretoken']").val()},success:function(t,o,n){$(e).parents(".comment").remove()},error:function(t,e,o){alert("tray again")}})})}),$(document).bind("DOMSubtreeModified",function(){$(".like-btn").off("click").on("click",function(t){t.preventDefault();var e=t.target,o=$(e).parents(".post-body");$.ajax({url:$like_btn,type:"GET",cache:!1,data:{post:o.attr("data-key")},success:function(t,e,n){$data=$.parseHTML(t),$s=$data[1],$(o).find(".stat").replaceWith($($data).find(".stat")),$audio.play()},error:function(t,e,o){}}).done(function(){$(o).find(".like-btn").hasClass("active")?$(o).find(".like-btn").removeClass("active"):$(o).find(".like-btn").addClass("active")})})}),$(document).bind("DOMSubtreeModified",function(){$(".comments-area").off("submit").on("submit",function(t){t.preventDefault();var e=t.target,o=$(e).parents(".post-body").attr("data-key"),n=$(e).children("#content"),a=$(e).offsetParent().find(".comments");""!==n.val()?$.ajax({url:$creat_comment,type:"POST",cache:!1,data:{content:n.val(),post:o,csrfmiddlewaretoken:$("input[name='csrfmiddlewaretoken']").val()},success:function(t,e,o){n.val(null),$(n).css("height","unset"),$data=$.parseHTML(t),$($data).prependTo(a),$audio.play()},error:function(t,e,o){alert("Sorry there is Error , Try again")}}):alert("you must write a comment ")})});var infinite=new Waypoint.Infinite({element:$("#time-line")[0],items:".post",more:".page-more-link",onBeforePageLoad:function(){$(".loading").show()},onAfterPageLoad:function(t){read_more(),autosize_textarea(),$(".loading").hide(),countViews($(t).find(".post-body"))}});$(document).ready(function(){$(".follow-btn").off("click").on("click",function(t){t.preventDefault();var e=t.target,o=$(e).attr("data-key");$.ajax({url:$follow,type:"Get",cache:!1,data:{id:o},success:function(){$audio.play(),"Follow"===$(e).val()?($(e).val("Unfollow"),$(e).removeClass("btn-primary").addClass("btn-outline-primary")):($(e).val("Follow"),$(e).removeClass("btn-outline-primary").addClass("btn-primary"))}})})}),$(document).ready(function(){$.ajax({url:$get_notifications,type:"Get",cache:!1,success:function(t,e,o){$("#notifications-area").append(t),$(".note").is(".false")&&$("#notifications").css("color","#ff0000")}}),setInterval(function(){$.ajax({url:$get_notifications,type:"Get",cache:!1,success:function(t,e,o){var n=$("#notifications-area").children(".notes");$(n).replaceWith(t),$(".note").is(".false")&&$("#notifications").css("color","#ff0000")}})},15e3)}),$(document).ready(function(){$("#notifications").off("click").on("click",function(){$.ajax({url:$get_notifications,type:"Get",cache:!1,success:function(t,e,o){$("#notifications-area").children(".notes").replaceWith(t),$(".note").is(".false")?$("#notifications").css("color","#ff0000"):$("#notifications").css("color","unset")}})})}),$(document).ready(function(){$("#r-note").off("click").on("click",function(){$.ajax({url:$read_notifications,type:"Get",cache:!1,success:function(t,e,o){$(".note").removeClass("false"),$("#notifications").css("color","unset")}})})}),$(document).bind("DOMSubtreeModified",function(){$(".hash-tag").off("click").on("click",function(t){t.preventDefault();var e=t.target,o=$(e).text();o=o.replace("#",""),window.location.href=$hash.replace(0,o)})});